% Create a one-sided article document type
\documentclass[a4paper, twoside, 12pt]{article}

% Define the course variables that are gonna be used several times
\newcommand{\university}{Universidad\ Politécnica\ de\ Madrid}
\newcommand{\school}{Escuela\ Técnica\ Superior\ de\ Ingenieros Informáticos}
\newcommand{\degree}{Grado\ Universitario\ en\ Ingeniería Informática}    
\newcommand{\tfg}{Trabajo de Fin de Grado}
\newcommand{\name}{Transformación de los datos de licitaciones de la Plataforma de Contratación Pública al estándar OCDS y su publicación como datos enlazados}
\newcommand{\me}{Pablo Palomo López}
\newcommand{\tutor}{María Poveda Villalón}
\newcommand{\supervisor}{Óscar Corcho García}

% Configure the metadata of the PDF document
\usepackage[
	bookmarks       = true,             % Show the bookmarks
	unicode         = true,             % Use Unicode                 
	pdftoolbar      = true,             % Show Acrobat’s toolbar
	pdfmenubar      = true,             % Show Acrobat’s menu
	pdffitwindow    = false,            % Window fit to page when opened
	pdfstartview    = {FitH},           % Fit the page width to the window
	pdfauthor       = {\me},            % The author of this document
	pdftitle        = {\name\ --\ \me}, % The title of this document
	pdfsubject      = {\name},          % The subject of this document
	pdfkeywords     = {\name},          % The keywords of this document
	pdfnewwindow    = true,             % Open the links in a new PDF window
	colorlinks      = true,             % Use colored links
	linkcolor       = blue,             % Internal links color
	citecolor       = blue,             % Bibliographic links color
	filecolor       = blue,             % File links color
	urlcolor        = blue              % External links color
]{hyperref}
\pdfstringdefDisableCommands{\let\uppercase}

% Redefine the size and margins (delete the 'twoside' indentation)
\usepackage[a4paper]{geometry}
% Define the geometry of the document
\newgeometry {
    top = 2.2cm, 
    bottom = 2.2cm, 
    right = 2cm, 
    left = 2cm
}
% Use UTF-8 as input encoding
\usepackage[utf8]{inputenc}
% Use a modern font (that is not pixelated)
\usepackage{lmodern}
% Use microtype to improve readability
\usepackage[protrusion = true, expansion = true]{microtype} 
% Use multiple columns
\usepackage{multicol}
% Display list of Equations
\usepackage{tocloft}
% Insert empty pages
\usepackage{afterpage}

% Custom packages
% Font specification
\usepackage{fontspec}
\setmainfont[
    ItalicFont=NewCM10-Italic.otf,
    BoldFont=NewCM10-Bold.otf,
    BoldItalicFont=NewCM10-BoldItalic.otf,
    SmallCapsFeatures={Numbers=OldStyle}]
{NewCM10-Regular.otf}
\setsansfont[
    ItalicFont=NewCMSans10-Oblique.otf,
    BoldFont=NewCMSans10-Bold.otf,
    BoldItalicFont=NewCMSans10-BoldOblique.otf,
    SmallCapsFeatures={Numbers=OldStyle}]
{NewCMSans10-Regular.otf}
\setmonofont[
    Path=./fonts/,
    Extension=.ttf,
    BoldFont=*-SemiBold, % Semibold font as bold
    UprightFont=*-Regular, % Regular font as default
    ItalicFont=*-Medium, % Medium font as italic
    Scale=0.8]
{FiraCode}

% Graphic package for bullet points
\usepackage{graphicx}

% Hyperlinks
\PassOptionsToPackage{obeyspaces}{url}
\usepackage{breakurl}
\usepackage{hyperref}
\hypersetup{
    breaklinks=true,
    colorlinks=true,
    filecolor=magenta, 
    linkcolor=blue,
    urlcolor=blue,
}
\urlstyle{same}

% Colour definitions
\usepackage[dvipsnames]{xcolor}
\definecolor{DarkGray}{rgb}{0.4,0.4,0.4}
\definecolor{DarkGreen}{rgb}{0.0,0.34,0.25}
\definecolor{DarkRed}{rgb}{0.42,0.07,0.02}
\definecolor{DarkViolet}{rgb}{0.4,0.0,0.4}

% Language highlighting
\usepackage{listings}
\lstdefinelanguage{lXML}{
    alsoletter={-},
    basicstyle=\ttfamily,
    breaklines=true,
    breakatwhitespace=true,
    frame=single,
    gobble=19,
    keywordstyle=[1]{\bfseries\color{RoyalBlue}},
    keywordstyle=[2]{\itshape\color{PineGreen}},
    keywordstyle=[3]{\color{RedViolet}},
    keywords=[1]{cac, cbc, cac-place-ext, cbc-place-ext},
    morekeywords=[2]{
        AddressLine,
        Attachment,
        AuctionConstraintIndicator,
        AuctionTerms,
        AwardDate,
        AwardedTenderedProject,
        BudgetAmount,
        CityName,
        Contact,
        Contract,
        Country,
        Description,
        ElectronicMail,
        EstimatedOverallContractAmount,
        ExternalReference,
        ContractFolderID,
        ContractFolderStatus,
        ContractFolderStatusCode,
        ContractingSystemCode,
        DurationMeasure,
        EndDate,
        ID,
        IdentificationCode,
        ItemClassificationCode,
        Language,
        LegalDocumentReference,
        LegalMonetaryTotal,
        Line,
        LocatedContractingParty,
        Name,
        Party,
        PartyName,
        PartyIdentification,
        PayableAmount,
        PlannedPeriod,
        PostalAddress,
        PostalZone,
        ProcedureCode,
        ProcurementProject,
        ProcurementProjectLot,
        ProcurementProjectLotID,
        ReceivedTenderQuantity,
        RequiredCommodityClassification,
        ResultCode,
        StartDate,
        SubmissionMethodCode,
        Telefax,
        Telephone,
        TenderingProcess,
        TenderingTerms,
        TenderResult,
        TotalAmount,
        TypeCode,
        URI,
        WebsiteURI,
        WinningParty
    },
    morekeywords=[3]{
        currencyID,
        languageID,
        listURI,
        schemeName,
        unitCode
    },
    morestring=*[d]{"},
    morestring=[s][]{\#\{}{\}},
    rulecolor=\color{black},
    showstringspaces=false,
    stringstyle=\color{OrangeRed},
    tabsize=10
}
\lstdefinelanguage{lXML2}{
    alsoletter={.,:,/,-,\#},
    basicstyle=\ttfamily,
    breaklines=true,
    breakatwhitespace=true,
    frame=single,
    gobble=19,
    keywordstyle=[1]{\color{Cerulean}},
    keywordstyle=[2]{\color{ForestGreen}},
    keywordstyle=[3]{\color{BrickRed}},
    keywords=[1]{
        http://dbpedia.org/resource/Spain
    },
    morekeywords=[2]{
        http://www.w3.org/1999/02/22-rdf-syntax-ns\#type,
        http://dbpedia.org/ontology/currencyCode,
        http://www.w3.org/2002/07/owl\#sameAs
    },
    morekeywords=[3]{
        http://schema.org/Country,
        EUR,
        http://openei.org/resources/Spain
    },
    rulecolor=\color{black},
    tabsize=10
}
\lstdefinelanguage{lJSON}{
    alsoletter={\{,\},\[,\]},
    basicstyle=\ttfamily,
    breaklines=true,
    breakatwhitespace=true,
    frame=single,
    gobble=19,
    keywordstyle=[1]{\bfseries},
    keywordstyle=[2]{\color{Brown}},
    keywordstyle=[3]{\color{Red}},
    keywords=[1]{\{,\},\[,\]},
    morekeywords=[2]{
        awards,
        contracts,
        parties,
        planning,
        tender
    },
    morekeywords=[3]{
        additionalIdentifiers,
        address,
        amount,
        budget,
        classification,
        contactPoint,
        countryName,
        currency,
        date,
        description_es,
        documents,
        documentType,
        email,
        endDate,
        faxNumber,
        id,
        identifier,
        items,
        locality,
        lots,
        mainProcurementCategory,
        name,
        ocid,
        period,
        postalCode,
        procurementMethod,
        procurementMethodDetails_es,
        relatedLot,
        roles,
        schema,
        startDate,
        streetAddress,
        submissionMethod,
        submissionMethodDetails,
        suppliers,
        tag,
        telephone,
        tenderPeriod,
        title,
        url,
        value
    },
    morestring=*[d]{"},
    morestring=[s][]{\#\{}{\}},
    rulecolor=\color{black},
    showstringspaces=false,
    stringstyle=\color{BrickRed},
    tabsize=10
}
\lstdefinelanguage{lCSharp}{
    basicstyle=\ttfamily\small,
    breaklines=true,
    breakatwhitespace=true,
    commentstyle=\color{DarkViolet},
    escapeinside={(*@}{@*)},
    frame=single,
    gobble=14,
    keywordstyle=[1]{\textit},
    keywordstyle=[2]{\color{DarkGreen}},
    keywordstyle=[3]{\color{DarkRed}},
    keywordstyle=[4]{\color{PineGreen}},
    keywords=[1]{
        from,
        enum,
        get,
        in,
        interface,
        namespace,
        null,
        public,
        select,
        set,
        where
    },
    morekeywords=[2]{
        AsyncCollection,
        Document,
        EPackagerOperationCode,
        EProviderOperationCode,
        IDictionary,
        IEnumerable,
        IMapper,
        IPackager,
        IParser,
        IProvider,
        LocalName,
        Name,
        JObject,
        string,
        Task,
        Thread,
        Uri,
        void,
        XElement,
        XName,
        XNamespace
    },
    morekeywords=[3]{
        AllProvider,
        Commit,
        Files,
        DocumentRoot,
        Elements,
        EntryRoot,
        Equals,
        GetDocumentTimestamp,
        GetElements,
        GetEntrySet,
        GetIdentifier,
        GetNamespaces,
        GetNextFile,
        MapElement,
        MappedEntry,
        Package,
        Parser,
        Publish,
        PROVIDE_ALL,
        PROVIDE_LATEST,
        PROVIDE_SPECIFIC,
        SetEntryRootElement,
        SetParser,
        RemoveFile,
        TakeFile
    },
    morekeywords=[4]{
        code,
        dirPath,
        document,
        entry,
        entryID,
        filePath,
        namespaces,
        node,
        parsedElement,
        pathMap,
        pathToElement,
        parser,
        publishDate,
        query,
    },
    morecomment=[l]{//}, 
    morecomment=[l]{///},
    morecomment=[s]{/*}{*/},
    morestring=*[d]{"},
    morestring=[s][]{\#\{}{\}},
    sensitive=true,
    showspaces=false,
    showstringspaces=false,
    stringstyle=\color{BrickRed},
    tabsize=10
}
\lstdefinelanguage{lSPARQL}{
    alsoletter={@},
    basicstyle=\ttfamily,
    breaklines=true,
    breakatwhitespace=true,
    frame=single,
    gobble=19,
    keywordstyle=[1]{\bfseries\color{DarkGray}},
    keywordstyle=[2]{\itshape\color{DarkGray}},
    keywords=[1]{
        OPTIONAL,
        @prefix,
        SELECT,
        WHERE,
    },
    morekeywords=[2]{
        dc,
        ocds,
        ocdsext,
        org,
        rdf,
        schema,
        skos,
        tbfy
    },
    morestring=[s]{<}{>},
    rulecolor=\color{black},
    stringstyle=\color{black},
    tabsize=10
}
% Fixed tabbing
\usepackage{tabto}

% Section label commands
\usepackage{nameref}
\newcommand{\currentsection}{}
\newcommand{\mysection}[1]{\section{#1}\renewcommand{\currentsection}{#1}}

% Sections depth
\usepackage{titlesec}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{3}

% Table centered wrapping
\usepackage{array}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}} %% horizontal centering
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}} %% vertical centering

% Multipage tables
\usepackage{longtable}

% Indexes name change
\renewcommand*\contentsname{Índice}
\renewcommand*\listtablename{Índice de tablas}
\renewcommand*\listfigurename{Índice de figuras}

% Subitem bullets style
\renewcommand{\labelitemii}{\circ}
\renewcommand{\labelitemiii}{\diamond}

% Configure style aspects of the document
\usepackage{caption}            % To configure the captions
\usepackage{siunitx}            % For SI units
\usepackage{graphicx}           % To include graphics
\usepackage{subcaption}         % To include subgraphics
\graphicspath{
    {schemes/} {images/}        % Images folder path
}
\usepackage[dvipsnames]{xcolor} % To configure colors
\usepackage{fancyhdr}           % To configure the header and footer
\pagestyle{fancy}               % Use a fancy header style
\fancyhf{}                      % Set the header format
\fancyheadoffset{0.0 cm}        % Set the header offset
\lhead{\tfg}                    % Set the header left-side contents
\rhead{\currentsection}         % Set the header right-side contents
\cfoot{\thepage}                % Set the footer page number

% Label changes
\captionsetup[table]{name=Tabla}
\captionsetup[figure]{name=Figura}

% Create a custom command shortcut
\renewcommand{\arraystretch}{1.3} % Modify the vertical spacing of the tables
\raggedbottom                     % Modify the vertical spacing of enumerated environments

% Set empty page 
\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage
}

% Set the title format
\title {
	\vspace*{1.0 cm}
	\Large\textbf{\uppercase{\university}} \\
	\vspace*{0.5 cm}
	\large\textbf{\uppercase{\school}} \\
	\vspace*{2 cm}
	\large\text{\uppercase{\degree}} \\
	\vspace*{2 cm}
	\large\text{\uppercase{\tfg}} \\
	\vspace*{1.0 cm}
	\LARGE\textbf{\uppercase{\name}} \\
}

% Set the author format
\author {
	\normalsize
	\begin{tabbing}
        \hspace*{0.4\linewidth} \= \hspace*{0.5\linewidth} \= \kill
    	\> Autor: \' \textbf{\me} \\[0.25cm]
    	\> Tutora: \' \textbf{\tutor} \\[0.25cm]
    	\> Supervisor: \' \textbf{\supervisor} \\
    \end{tabbing}
    
    \vspace{2cm}
}

% Set the date format
\date { 
    Madrid, mayo de 2021
}

% A macro to print the title
\makeatletter
\def\printtitle{{\centering\@title\par}}
\makeatother

% A macro to print the author
\makeatletter
\def\printauthor{{\centering\large\@author}}
\makeatother

% A macro to print the date
\makeatletter
\def\printdate{{\centering\@date}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Start the document
\begin{document}
    % Include the cover
    \afterpage{\blankpage}
    \input{portada.tex}
    % Include the different sections
    \pagenumbering{roman}
    \input{includes/abstract}
    \input{includes/resumen}
    \input{includes/agradecimientos}
    \input{includes/indice}
    \input{includes/indice_tablas}
    \input{includes/indice_figuras}
    \pagenumbering{arabic}
    \input{includes/introduccion}
    \input{includes/estado_arte}
    \input{includes/software}
    \input{includes/correspondencias}
    \input{includes/datos_enlazados}
    \input{includes/analisis_impacto}
    \input{includes/conclusiones}
    \input{includes/referencias}
    \input{includes/anexos}
\end{document}
% Finish the document
