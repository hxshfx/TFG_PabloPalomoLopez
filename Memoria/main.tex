% Create a one-sided article document type
\documentclass[a4paper, twoside, 12pt]{article}

% Define the course variables that are gonna be used several times
\newcommand{\university}{Universidad\ Politécnica\ de\ Madrid}
\newcommand{\school}{Escuela\ Técnica\ Superior\ de\ Ingenieros Informáticos}
\newcommand{\degree}{Grado\ Universitario\ en\ Ingeniería Informática}    
\newcommand{\tfg}{Trabajo de Fin de Grado}
\newcommand{\name}{XXXXX}
\newcommand{\me}{Pablo Palomo López}
\newcommand{\supervisor}{Óscar Corcho García}

% Configure the metadata of the PDF document
\usepackage[
	bookmarks       = true,             % Show the bookmarks
	unicode         = true,             % Use Unicode                 
	pdftoolbar      = true,             % Show Acrobat’s toolbar
	pdfmenubar      = true,             % Show Acrobat’s menu
	pdffitwindow    = false,            % Window fit to page when opened
	pdfstartview    = {FitH},           % Fit the page width to the window
	pdfauthor       = {\me},            % The author of this document
	pdftitle        = {\name\ --\ \me}, % The title of this document
	pdfsubject      = {\name},          % The subject of this document
	pdfkeywords     = {\name},          % The keywords of this document
	pdfnewwindow    = true,             % Open the links in a new PDF window
	colorlinks      = true,             % Use colored links
	linkcolor       = blue,             % Internal links color
	citecolor       = green,            % Bibliographic links color
	filecolor       = cyan,             % File links color
	urlcolor        = magenta           % External links color
]{hyperref}
\pdfstringdefDisableCommands{\let\uppercase}

% Redefine the size and margins (delete the 'twoside' indentation)
\usepackage[a4paper]{geometry}
% Define the geometry of the document
\newgeometry {
    top = 2.2cm, 
    bottom = 2.2cm, 
    right = 2cm, 
    left = 2cm
}
% Use UTF-8 as input encoding
\usepackage[utf8]{inputenc}
% Use a modern font (that is not pixelated)
\usepackage{lmodern}
% Use microtype to improve readability
\usepackage[protrusion = true, expansion = true]{microtype} 
% Use multiple columns
\usepackage{multicol}
% Display two figures next to each other
\usepackage{subfigure}
\usepackage[subfigure]{tocloft}
% Display list of Equations
\usepackage{tocloft}
% Insert empty pages
\usepackage{afterpage}

% Custom packages
% Font specification
\usepackage{fontspec}
\setmainfont[
    ItalicFont=NewCM10-Italic.otf,
    BoldFont=NewCM10-Bold.otf,
    BoldItalicFont=NewCM10-BoldItalic.otf,
    SmallCapsFeatures={Numbers=OldStyle}]
{NewCM10-Regular.otf}
\setsansfont[
    ItalicFont=NewCMSans10-Oblique.otf,
    BoldFont=NewCMSans10-Bold.otf,
    BoldItalicFont=NewCMSans10-BoldOblique.otf,
    SmallCapsFeatures={Numbers=OldStyle}]
{NewCMSans10-Regular.otf}
\setmonofont[
    Path=./fonts/,
    Extension=.ttf,
    BoldFont=*-SemiBold, % Semibold font as bold
    UprightFont=*-Regular, % Regular font as default
    ItalicFont=*-Medium, % Medium font as italic
    Scale=0.8]
{FiraCode}

% Graphic package for bullet points
\usepackage{graphicx}

% Hyperlinks
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
}
\urlstyle{same}

% Language highlighting
\usepackage{listings}
\lstdefinelanguage{lXML}{
    alsoletter={-},
    basicstyle=\ttfamily,
    breaklines=true,
    breakatwhitespace=true,
    frame=single,
    gobble=20,
    keywordstyle=[1]{\bfseries\color{RoyalBlue}},
    keywordstyle=[2]{\itshape\color{PineGreen}},
    keywordstyle=[3]{\color{RedViolet}},
    keywords=[1]{cac, cbc, cac-place-ext, cbc-place-ext},
    morekeywords=[2]{
        Attachment,
        AuctionConstraintIndicator,
        AuctionTerms,
        BudgetAmount,
        EstimatedOverallContractAmount,
        ExternalReference,
        ContractFolderID,
        ContractFolderStatus,
        ContractFolderStatusCode,
        ContractingSystemCode,
        DurationMeasure,
        EndDate,
        ID,
        Language,
        LegalDocumentReference,
        Name,
        PlannedPeriod,
        ProcedureCode,
        ProcurementProject,
        StartDate,
        SubmissionMethodCode,
        TenderingProcess,
        TenderingTerms,
        TotalAmount,
        TypeCode,
        URI
    },
    morekeywords=[3]{
        currencyID,
        languageID,
        listURI,
        unitCode
    },
    morestring=*[d]{"},
    morestring=[s][]{\#\{}{\}},
    rulecolor=\color{black},
    showstringspaces=false,
    stringstyle=\color{OrangeRed}, 
    tabsize=10
}
\lstdefinelanguage{lJSON}{
    alsoletter={\{,\},\[,\]},
    basicstyle=\ttfamily,
    breaklines=true,
    breakatwhitespace=true,
    frame=single,
    gobble=20,
    keywordstyle=[1]{\bfseries},
    keywordstyle=[2]{\color{Brown}},
    keywordstyle=[3]{\color{Red}},
    keywords=[1]{\{,\},\[,\]},
    morekeywords=[2]{
        planning,
        tender
    },
    morekeywords=[3]{
        amount,
        budget,
        currency,
        documents,
        documentType,
        endDate,
        mainProcurementCategory,
        id,
        ocid,
        procurementMethod,
        procurementMethodDetails,
        startDate,
        submissionMethod,
        submissionMethodDetails,
        tag,
        tenderPeriod,
        title,
        url,
        value
    },
    morestring=*[d]{"},
    morestring=[s][]{\#\{}{\}},
    rulecolor=\color{black},
    showstringspaces=false,
    stringstyle=\color{BrickRed},
    tabsize=10
}
% Fixed tabbing
\usepackage{tabto}

% Configure style aspects of the document
\usepackage{caption}            % To configure the captions
\usepackage{siunitx}            % For SI units
\usepackage{graphicx}           % To include graphics
\usepackage[dvipsnames]{xcolor} % To configure colors
\usepackage{fancyhdr}           % To configure the header and footer
\pagestyle{fancy}               % Use a fancy header style
\fancyhf{}                      % Set the header format
\fancyheadoffset{0.0 cm}        % Set the header offset
\lhead{\tfg}                    % Set the header right-side contents
\rhead{\name}                   % Set the header left-side contents
\cfoot{\thepage}                % Set the footer page number

% Create a custom command shortcut
\renewcommand{\arraystretch}{1.3} % Modify the vertical spacing of the tables
\raggedbottom                     % Modify the vertical spacing of enumerated environments

% Set empty page 
\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage
}

% Set the title format
\title {
	\vspace*{1.0 cm}
	\Large\textbf{\uppercase{\university}} \\
	\vspace*{0.5 cm}
	\large\textbf{\uppercase{\school}} \\
	\vspace*{2 cm}
	\large\text{\uppercase{\degree}} \\
	\vspace*{2 cm}
	\large\text{\uppercase{\tfg}} \\
	\vspace*{1.0 cm}
	\LARGE\textbf{\uppercase{\name}} \\
}

% Set the author format
\author {
	\normalsize
	\begin{tabbing}
        \hspace*{0.4\linewidth} \= \hspace*{0.5\linewidth} \= \kill
    	\> Autor: \' \textbf{\me} \\[0.25cm]
    	\> Supervisor: \' \textbf{\supervisor} \\
    \end{tabbing}
    
    \vspace{2cm}
}

% Set the date format
\date { 
    Madrid, mayo de 2021
}

% A macro to print the title
\makeatletter
\def\printtitle{{\centering\@title\par}}
\makeatother

% A macro to print the author
\makeatletter
\def\printauthor{{\centering\large\@author}}
\makeatother

% A macro to print the date
\makeatletter
\def\printdate{{\centering\@date}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Start the document
\begin{document}
    % Include the cover
    \afterpage{\blankpage}
    \input{cover.tex}
    % Include the different sections
    \input{includes/abstract}
    \input{includes/resumen}
    \input{includes/acknowledgement}
    \input{includes/index}
    \input{includes/index_tables}
    \input{includes/index_figures}
    \input{includes/index_equations}
    \input{includes/intro}
    \input{includes/correspondencias}
    \input{includes/conclusions}
    \input{includes/references}
    \input{includes/annex}
\end{document}
% Finish the document
